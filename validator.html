<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GRAVES VALIDATION SUITE v28.2 | FINAL</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --cyan: #00ffcc;
            --red: #ff3333;
            --gold: #ffaa00;
            --bg: #050505;
            --glass: rgba(10, 15, 20, 0.98);
            --border: 1px solid rgba(0, 255, 204, 0.2);
            --font-main: "Inter", system-ui, sans-serif;
            --font-mono: 'Courier New', monospace;
        }

        * { box-sizing: border-box; user-select: none; }

        body {
            margin: 0; background-color: var(--bg); color: #e0e0e0;
            font-family: var(--font-main); height: 100vh; overflow: hidden;
            display: grid; grid-template-rows: 50px 1fr;
            background: radial-gradient(circle at center, #080808 0%, #000 100%);
        }

        header {
            background: rgba(0,0,0,0.9); border-bottom: var(--border);
            display: flex; justify-content: space-between; align-items: center;
            padding: 0 20px; font-size: 0.85em; font-weight: 700; letter-spacing: 2px;
            z-index: 10;
        }
        .clock-ref { font-family: var(--font-mono); font-size: 0.9em; color: #666; }
        .clock-live { color: var(--cyan); margin-left: 10px; }

        #workspace {
            display: grid; grid-template-columns: 420px 1fr 350px;
            height: 100%; overflow: hidden;
        }

        .panel {
            background: var(--glass); border-right: var(--border);
            padding: 20px; display: flex; flex-direction: column; gap: 15px;
            overflow-y: auto;
        }
        .panel-right { border-right: none; border-left: var(--border); }

        h2 { margin: 0 0 10px 0; font-size: 0.75em; color: #888; text-transform: uppercase; letter-spacing: 1px; border-bottom: 1px solid #333; padding-bottom: 5px; }

        #inv-list {
            flex: 1; overflow-y: auto; border: 1px solid #333; background: #000;
            font-family: var(--font-mono); font-size: 0.7em;
        }
        .inv-item {
            padding: 12px; border-bottom: 1px solid #222; cursor: pointer; color: #666; transition: 0.2s;
            display: flex; justify-content: flex-start; align-items: center;
        }
        .inv-item:hover { background: rgba(0, 255, 204, 0.1); color: #fff; }
        .inv-item.active { background: var(--cyan); color: #000; font-weight: bold; }
        .inv-id { color: #444; margin-right: 15px; font-weight: bold; min-width: 60px; }
        .inv-item.active .inv-id { color: #000; }

        .input-group { margin-bottom: 10px; }
        label { display: block; font-size: 0.7em; color: #666; margin-bottom: 3px; font-family: var(--font-mono); }
        input, textarea {
            width: 100%; background: #111; border: 1px solid #333; color: var(--cyan);
            padding: 8px; font-family: var(--font-mono); font-size: 0.85em; outline: none; resize: none;
        }
        
        #stage {
            position: relative; display: flex; flex-direction: column;
            padding: 20px; gap: 20px; background: radial-gradient(circle at center, #111 0%, #000 100%);
        }

        .graph-box {
            flex: 1; background: rgba(0,0,0,0.5); border: 1px solid #333;
            position: relative; 
            padding: 10px; display: flex; flex-direction: column;
            overflow: hidden;
        }
        .graph-header { position: absolute; top: 10px; left: 10px; font-size: 0.7em; color: var(--cyan); font-weight: bold; z-index: 10;}
        .lock-indicator { position: absolute; top: 10px; right: 10px; font-size: 0.7em; color: #555; font-weight: bold; z-index: 10;}
        
        button {
            width: 100%; padding: 15px; background: rgba(0, 255, 204, 0.1);
            border: 1px solid var(--cyan); color: var(--cyan); font-family: var(--font-main);
            font-weight: 700; letter-spacing: 1px; cursor: pointer; transition: 0.2s;
            text-transform: uppercase; margin-top: 5px;
        }
        button:hover { background: var(--cyan); color: #000; box-shadow: 0 0 20px rgba(0,255,204,0.4); }
        button:disabled { border-color: #333; color: #555; background: transparent; cursor: not-allowed; box-shadow: none; }

        #console {
            height: 250px; background: #000; border: 1px solid #333;
            font-family: var(--font-mono); font-size: 0.7em; color: #888;
            padding: 10px; overflow-y: auto; white-space: pre-wrap; line-height: 1.4;
        }
        .log-cyan { color: var(--cyan); }
        .log-red { color: var(--red); }
        .log-gold { color: var(--gold); }

        #scan-line {
            position: absolute; top: 0; left: 0; width: 2px; height: 100%; background: var(--cyan);
            box-shadow: 0 0 10px var(--cyan); opacity: 0; pointer-events: none; z-index: 5;
        }

        canvas { width: 100%; height: 100%; display: block; }
        
        .atom-label {
            position: absolute; color: #fff; font-size: 10px; font-family: sans-serif;
            pointer-events: none; text-shadow: 0 0 4px #000; font-weight: bold;
            opacity: 0; transition: opacity 0.5s;
            z-index: 5;
        }
        .atom-label.visible { opacity: 1; }

    </style>
</head>
<body>

<header>
    <div>GRAVES VALIDATION SUITE <span style="color:#666">// v28.2 FINAL</span></div>
    <div class="clock-ref">DEUTERIUM REF: <span class="clock-live" id="clock-display">327.384 MHz</span></div>
</header>

<div id="workspace">
    
    <div class="panel">
        <h2>1. Select Invention (1-100)</h2>
        <div id="inv-list"></div>
        
        <h2>2. Composition Specs</h2>
        <div class="input-group">
            <label>PRIMARY ELEMENTS</label>
            <input type="text" id="comp-elements" readonly>
        </div>
        <div class="input-group">
            <label>FULL COMPOSITION CLAIM</label>
            <textarea id="comp-detail" rows="6" readonly style="font-size:0.75em; color:#aaa;"></textarea>
        </div>
        <div class="input-group">
            <label>LATTICE SYMMETRY</label>
            <input type="text" id="lattice-type" readonly>
        </div>
        
        <div class="input-group" style="background:#111; border:1px solid #333; padding:10px;">
            <label style="color:#666; font-size:0.6em;">STRUCTURAL PARAMETERS</label>
            <div id="struct-readout" style="color:#fff; font-family:var(--font-mono); font-size:0.8em;">
                SHELLS: --<br>
                BONDS: --
            </div>
        </div>
        
        <button id="btn-scan" onclick="runScan()" disabled>INITIATE TORSION SCAN</button>
    </div>

    <div id="stage">
        <div class="graph-box" style="flex: 1;">
            <div class="graph-header">VACUUM-DEBT SCANNER (4.8° - 6.0°)</div>
            <div class="lock-indicator" id="lock-indicator">STANDBY</div>
            <canvas id="scanCanvas"></canvas>
            <div id="scan-line"></div>
        </div>

        <div class="graph-box" style="flex: 2; background: #000; overflow:hidden;" id="atom-container">
            <div class="graph-header">3D ATOMIC LATTICE (LIVE RENDER)</div>
            <canvas id="atomCanvas"></canvas>
        </div>
    </div>

    <div class="panel panel-right">
        <h2>3. Lock Results</h2>
        <div class="input-group">
            <label>UNIQUE LOCK ANGLE (°)</label>
            <input type="text" id="res-angle" readonly style="color:var(--gold); font-weight:bold; font-size:1.2em;">
        </div>
        <div class="input-group">
            <label>VACUUM DEBT</label>
            <input type="text" id="res-slack" readonly style="color:var(--cyan);">
        </div>
        
        <h2>4. Validation Log</h2>
        <div id="console">
> SYSTEM INITIALIZED.
> DATABASE LOADED. SPEC 218778 (11/25/2025).
> WAITING FOR RANK SELECTION...</div>
    </div>

</div>

<script>
    const DB = {
        "001": { 
            name: "Defense Alloys (Ni-Co)", 
            elements: ["Ni","Co","Cr","Al","Ti","Mo","W","Nb"], 
            detail: "PROCESS CLAIM:\nNickel Superalloy formation via controlled cooling with icosahedral phase stabilization. Multi-stage heat treatment at 1200°C followed by rapid quench.\n\nUSE CLAIM:\nHigh-temperature turbine components, aerospace structural elements, military aircraft engine components.\n\nUTILITY PATENT:\nProvides superior creep resistance and thermal stability in extreme environments through quasicrystalline phase formation. Enables 15% performance improvement over conventional superalloys.",
            lattice: "Icosahedral",
            shells: 4,
            bonds: 24
        },
        "002": { 
            name: "Hyper-Naval Armor (Co-Cr)", 
            elements: ["Co","Cr","Ni","W","Al","Ta"], 
            detail: "PROCESS CLAIM:\nCobalt-Based Decagonal Superalloy formed through precision casting with controlled solidification rates.\n\nUSE CLAIM:\nNaval vessel armor plating, submarine hull reinforcement, ballistic protection systems.\n\nUTILITY PATENT:\nHigh shear strength and impact resistance through decagonal quasicrystalline structure. Superior corrosion resistance in marine environments.",
            lattice: "Decagonal",
            shells: 3,
            bonds: 20
        },
        "003": { 
            name: "Hypersonic Leading Edge (W)", 
            elements: ["W","Re","Hf","C"], 
            detail: "PROCESS CLAIM:\nTungsten-Rhenium Matrix formed via powder metallurgy with carbide dispersion strengthening.\n\nUSE CLAIM:\nHypersonic vehicle leading edges, re-entry vehicle components, rocket nozzle liners.\n\nUTILITY PATENT:\nExtreme temperature resistance up to 3400°C. Maintains structural integrity during atmospheric re-entry.",
            lattice: "Icosahedral",
            shells: 5,
            bonds: 30
        }
    };

    const safeElements = ["C", "Si", "Fe", "Al", "Ti", "Ni", "Co", "Cr", "Cu", "Zn"];
    for(let i=4; i<=100; i++) {
        let id = i.toString().padStart(3, '0');
        let type = i % 3 === 0 ? "Decagonal" : (i % 3 === 1 ? "Icosahedral" : "Pentagonal");
        let el1 = safeElements[i % safeElements.length];
        let el2 = safeElements[(i+1) % safeElements.length];
        let el3 = safeElements[(i+2) % safeElements.length];
        
        DB[id] = {
            name: `Rank ${id} Advanced Material System`,
            elements: [el1, el2, el3], 
            detail: `PROCESS CLAIM:\nProprietary Graves-Law formulation ${id} with ${type} symmetry stabilization.\n\nUSE CLAIM:\nSpecialized industrial and defense applications requiring advanced material properties.\n\nUTILITY PATENT:\nNovel quasicrystalline structure provides unique combination of strength, thermal stability, and functional properties.`,
            lattice: type,
            shells: 2 + (i % 5),
            bonds: 15 + (i % 20)
        };
    }

    let currentRank = null;
    let isScanning = false;
    let isLocked = false;
    let lockedAngle = 0;
    let atoms = [];
    
    const invList = document.getElementById('inv-list');
    const scanCtx = document.getElementById('scanCanvas').getContext('2d');
    const atomCtx = document.getElementById('atomCanvas').getContext('2d');
    const consoleDiv = document.getElementById('console');
    const atomContainer = document.getElementById('atom-container');

    function init() {
        Object.keys(DB).sort((a,b) => parseInt(a)-parseInt(b)).forEach(key => {
            let el = document.createElement('div');
            el.className = 'inv-item';
            el.innerHTML = `<span class="inv-id">RANK ${key}</span><span>${DB[key].name}</span>`;
            el.onclick = () => selectRank(key);
            invList.appendChild(el);
        });
        
        resize();
        window.addEventListener('resize', resize);
        
        initAtoms();
        requestAnimationFrame(drawLoop);
    }

    function resize() {
        scanCtx.canvas.width = scanCtx.canvas.offsetWidth;
        scanCtx.canvas.height = scanCtx.canvas.offsetHeight;
        atomCtx.canvas.width = atomCtx.canvas.offsetWidth;
        atomCtx.canvas.height = atomCtx.canvas.offsetHeight;
        drawGrid(scanCtx);
    }

    function calculateVacuumDebt(angle, shells, bonds, lattice) {
        const BASE_REF = 5.03;
        
        let baseDebt = shells * 10;
        let torsionalTerm = Math.pow(Math.abs(angle - BASE_REF), 2) * bonds;
        
        let symmetryWaste = 0;
        if (lattice !== "Icosahedral" && lattice !== "Decagonal" && lattice !== "Pentagonal") {
            symmetryWaste = 10000;
        }
        
        let translationalSlack = 0;
        if (lattice === "Cubic") {
            translationalSlack = 500;
        }
        
        let entropyPenalty = 0.005 * Math.pow(angle - BASE_REF, 2);
        
        let totalDebt = baseDebt + torsionalTerm + symmetryWaste + translationalSlack + entropyPenalty;
        
        return totalDebt;
    }

    function selectRank(id) {
        if(isScanning) return;
        currentRank = id;
        const data = DB[id];
        
        document.querySelectorAll('.inv-item').forEach(e => e.classList.remove('active'));
        Array.from(invList.children).find(e => e.innerText.includes(id)).classList.add('active');

        document.getElementById('comp-elements').value = data.elements.join(" - ");
        document.getElementById('comp-detail').value = data.detail;
        document.getElementById('lattice-type').value = data.lattice;
        document.getElementById('struct-readout').innerHTML = `SHELLS: ${data.shells}<br>BONDS: ${data.bonds}`;
        document.getElementById('btn-scan').disabled = false;
        
        document.getElementById('res-angle').value = "--";
        document.getElementById('res-slack').value = "--";
        document.getElementById('lock-indicator').innerText = "READY";
        document.getElementById('lock-indicator').style.color = "#555";
        
        isLocked = false;
        clearLabels();
        updateAtomTargets(data.lattice);
        
        drawGrid(scanCtx);
        log(`SELECTED RANK ${id}: ${data.name}`);
        log(`LATTICE: ${data.lattice} | SHELLS: ${data.shells} | BONDS: ${data.bonds}`);
    }

    function log(msg, type='') {
        const d = document.createElement('div');
        d.innerHTML = `> ${msg}`;
        if(type==='cyan') d.className = 'log-cyan';
        if(type==='red') d.className = 'log-red';
        if(type==='gold') d.className = 'log-gold';
        consoleDiv.appendChild(d);
        consoleDiv.scrollTop = consoleDiv.scrollHeight;
    }

    function runScan() {
        if(!currentRank) return;
        const data = DB[currentRank];
        
        isScanning = true;
        document.getElementById('btn-scan').disabled = true;
        document.getElementById('lock-indicator').innerText = "SCANNING...";
        document.getElementById('lock-indicator').style.color = "var(--cyan)";
        document.getElementById('scan-line').style.opacity = 1;
        
        log(`INITIATING TORSIONAL SWEEP [4.8° - 6.0°]...`, "cyan");
        log(`STEP SIZE: 0.0001° | CALCULATING VACUUM-DEBT...`);
        
        const MIN_ANGLE = 4.8;
        const MAX_ANGLE = 6.0;
        const STEP = 0.0001;
        
        let w = scanCtx.canvas.width;
        let h = scanCtx.canvas.height;
        
        scanCtx.fillStyle = '#000'; 
        scanCtx.fillRect(0,0,w,h);
        drawGrid(scanCtx);

        let minDebt = Infinity;
        let lockAngle = 0;
        let debtAtLock = 0;
        
        let allDebts = [];
        
        for(let angle = MIN_ANGLE; angle <= MAX_ANGLE; angle += STEP) {
            let debt = calculateVacuumDebt(angle, data.shells, data.bonds, data.lattice);
            allDebts.push({angle: angle, debt: debt});
            
            if(debt < minDebt) {
                minDebt = debt;
                lockAngle = angle;
                debtAtLock = debt;
            }
        }
        
        let maxDebtForScale = Math.max(...allDebts.map(d => d.debt));
        if(maxDebtForScale > 1000) maxDebtForScale = 1000;
        
        let step = 0;
        let totalSteps = allDebts.length;
        let renderInterval = Math.floor(totalSteps / 500);
        
        let timer = setInterval(() => {
            for(let i=0; i<renderInterval && step < totalSteps; i++, step++) {
                let entry = allDebts[step];
                let pct = (entry.angle - MIN_ANGLE) / (MAX_ANGLE - MIN_ANGLE);
                let x = pct * w;
                
                let debtNorm = Math.min(entry.debt / maxDebtForScale, 1);
                let y = h - (debtNorm * h * 0.9) - (h * 0.05);
                
                let isNearLock = Math.abs(entry.angle - lockAngle) < 0.001;
                scanCtx.fillStyle = isNearLock ? "#ffaa00" : (entry.debt < 50 ? "#00ffcc" : "#ff3333");
                scanCtx.fillRect(x, y, 2, 2);
            }
            
            let scanPct = step / totalSteps;
            document.getElementById('scan-line').style.left = (scanPct * w) + "px";
            
            if(step >= totalSteps) {
                clearInterval(timer);
                finishLock(lockAngle, debtAtLock);
            }
        }, 1);
    }

    function finishLock(angle, debt) {
        isScanning = false;
        isLocked = true;
        lockedAngle = angle;
        document.getElementById('btn-scan').disabled = false;
        document.getElementById('scan-line').style.opacity = 0;
        document.getElementById('lock-indicator').innerText = "LOCKED";
        document.getElementById('lock-indicator').style.color = "var(--gold)";
        
        document.getElementById('res-angle').value = angle.toFixed(6) + "°";
        document.getElementById('res-slack').value = debt.toFixed(3);
        
        log(`═══════════════════════════════════════`, "gold");
        log(`LOCK CERTIFICATE`, "gold");
        log(`═══════════════════════════════════════`, "gold");
        log(`ANGLE: ${angle.toFixed(6)}°`, "cyan");
        log(`VACUUM-DEBT: ${debt.toFixed(6)}`, "cyan");
        log(`STATUS: ${debt < 0.1 ? 'PERFECT LOCK' : 'EQUILIBRIUM FOUND'}`, debt < 0.1 ? "gold" : "cyan");
        log(`═══════════════════════════════════════`, "gold");
        
        createLabels();
    }

    let time = 0;

    function initAtoms() {
        atoms = [];
        for(let i=0; i<60; i++) {
            atoms.push({
                x: (Math.random()-0.5)*400,
                y: (Math.random()-0.5)*400,
                z: (Math.random()-0.5)*400,
                tx: 0, ty: 0, tz: 0
            });
        }
    }
    function updateAtomTargets(latticeType) {
        const phi = 1.618;
        let targets = [];
        const scale = 95; 

        if (latticeType === "Decagonal") {
            for(let k=0; k<5; k++) {
                let y = (k-2)*50;
                for(let j=0; j<10; j++) { 
                    let th = (j/10)*Math.PI*2;
                    targets.push({ x: Math.cos(th)*scale, y: y, z: Math.sin(th)*scale });
                }
            }
        } 
        else if (latticeType === "Pentagonal") {
            for(let i=0; i<60; i++) {
                let r = (i/60) * scale * 1.5;
                let th = i * (Math.PI*2 / 5) + (i*0.1);
                let z = (i - 30) * 4;
                targets.push({ x: Math.cos(th)*r, y: z, z: Math.sin(th)*r });
            }
        }
        else {
            targets.push([0, 1, phi], [0, -1, phi], [0, 1, -phi], [0, -1, -phi]);
            targets.push([1, phi, 0], [-1, phi, 0], [1, -phi, 0], [-1, -phi, 0]);
            targets.push([phi, 0, 1], [-phi, 0, 1], [phi, 0, -1], [-phi, 0, -1]);
            
            let base = targets.map(p => ({x:p[0]*scale, y:p[1]*scale, z:p[2]*scale}));
            let inner = targets.map(p => ({x:p[0]*scale*0.5, y:p[1]*scale*0.5, z:p[2]*scale*0.5}));
            
            targets = [...base, ...inner];
            while(targets.length < 60) {
                let th = Math.random()*Math.PI*2;
                let ph = Math.random()*Math.PI;
                targets.push({
                    x: Math.sin(ph)*Math.cos(th)*scale*0.8,
                    y: Math.cos(ph)*scale*0.8,
                    z: Math.sin(ph)*Math.sin(th)*scale*0.8
                });
            }
        }

        atoms.forEach((a, i) => {
            let t = targets[i % targets.length];
            a.tx = t.x; a.ty = t.y; a.tz = t.z;
        });
    }

    function drawLoop() {
        time += 0.02;
        let w = atomCtx.canvas.width;
        let h = atomCtx.canvas.height;
        let cx = w/2; 
        let cy = h/2 + 70;

        atomCtx.clearRect(0,0,w,h);
        
        if(!currentRank) {
            requestAnimationFrame(drawLoop);
            return;
        }
        
        let rot = isLocked ? time * 0.2 : time;
        let progress = isLocked ? 1 : 0;
        let elements = DB[currentRank].elements;

        let renderList = [];

        atoms.forEach((a, i) => {
            let noise = isLocked ? 0 : Math.sin(time + i)*60;
            
            let cx_ = a.x * (1-progress) + a.tx * progress + noise;
            let cy_ = a.y * (1-progress) + a.ty * progress + noise;
            let cz_ = a.z * (1-progress) + a.tz * progress + noise;

            let x1 = cx_ * Math.cos(rot) - cz_ * Math.sin(rot);
            let z1 = cx_ * Math.sin(rot) + cz_ * Math.cos(rot);
            let y1 = cy_ * Math.cos(rot*0.5) - z1 * Math.sin(rot*0.5);
            let z2 = cy_ * Math.sin(rot*0.5) + z1 * Math.cos(rot*0.5);

            let fov = 500;
            let scale = fov / (fov + z2 + 600);
            let px = cx + x1 * scale;
            let py = cy + y1 * scale;

            renderList.push({ x: px, y: py, z: z2, s: scale, i: i });
        });

        renderList.sort((a, b) => b.z - a.z);

        atomCtx.strokeStyle = isLocked ? "rgba(0, 255, 204, 0.3)" : "rgba(255, 80, 80, 0.4)";
        atomCtx.lineWidth = 1;
        atomCtx.beginPath();
        for(let i=0; i<renderList.length; i++) {
            for(let j=i+1; j<renderList.length; j++) {
                let p1 = renderList[i];
                let p2 = renderList[j];
                let dist = Math.hypot(p1.x-p2.x, p1.y-p2.y);
                if(dist < 70 * p1.s) {
                    atomCtx.moveTo(p1.x, p1.y);
                    atomCtx.lineTo(p2.x, p2.y);
                }
            }
        }
        atomCtx.stroke();

        renderList.forEach(p => {
            let el = elements[p.i % elements.length];
            atomCtx.fillStyle = isLocked ? getElementColor(el) : "#fff"; 
            let size = isLocked ? 4 * p.s : 3 * p.s;
            
            if(!isLocked) {
                atomCtx.shadowBlur = 10;
                atomCtx.shadowColor = "#ff3333";
            } else {
                atomCtx.shadowBlur = 0;
            }

            atomCtx.beginPath();
            atomCtx.arc(p.x, p.y, size, 0, Math.PI*2);
            atomCtx.fill();
            atomCtx.shadowBlur = 0;

            if(isLocked) updateLabelPos(p.i, p.x, p.y);
        });

        requestAnimationFrame(drawLoop);
    }

    function createLabels() {
        clearLabels();
        let elements = DB[currentRank].elements;
        atoms.forEach((a, i) => {
            let elName = elements[i % elements.length];
            let div = document.createElement('div');
            div.className = 'atom-label visible';
            div.innerText = elName;
            div.id = `lbl-${i}`;
            div.style.color = getElementColor(elName);
            atomContainer.appendChild(div);
        });
    }

    function updateLabelPos(i, x, y) {
        let lbl = document.getElementById(`lbl-${i}`);
        if(lbl) {
            lbl.style.left = (x + 8) + 'px';
            lbl.style.top = (y - 8) + 'px';
        }
    }

    function clearLabels() {
        document.querySelectorAll('.atom-label').forEach(el => el.remove());
    }

    function getElementColor(el) {
        const colors = {"C": "#888", "Si": "#b0b0ff", "Fe": "#ff8844", "Al": "#aaaaff",
            "Ti": "#ccccff", "Ni": "#99ff99", "Co": "#ff99dd", "Cr": "#ffaa44",
            "W": "#ffff66", "Mo": "#cc99ff", "Nb": "#88ddff", "Cu": "#ff9955",
            "Zr": "#aaffaa", "Ag": "#dddddd", "Pb": "#666666", "B": "#ffaacc",
            "Re": "#ffcc88", "Hf": "#99ccff", "Ta": "#bb99ff", "V": "#ffdd88",
            "Li": "#ff6666", "Sc": "#99ffcc", "U": "#66ff66", "Ir": "#ffff99",
            "Os": "#ccff99", "Rh": "#ffccff", "Zn": "#ffbb88"
        };
        return colors[el] || "#00ffcc";
    }

    function drawGrid(ctx) {
        let w = ctx.canvas.width;
        let h = ctx.canvas.height;
        
        ctx.fillStyle = '#000';
        ctx.fillRect(0, 0, w, h);
        
        ctx.strokeStyle = '#222';
        ctx.lineWidth = 1;
        
        for(let i=0; i<10; i++) {
            let y = (i/10) * h;
            ctx.beginPath();
            ctx.moveTo(0, y);
            ctx.lineTo(w, y);
            ctx.stroke();
        }
        
        for(let i=0; i<20; i++) {
            let x = (i/20) * w;
            ctx.beginPath();
            ctx.moveTo(x, 0);
            ctx.lineTo(x, h);
            ctx.stroke();
        }
    }

    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', init);
    } else {
        init();
    }
</script>
</body>
</html>
